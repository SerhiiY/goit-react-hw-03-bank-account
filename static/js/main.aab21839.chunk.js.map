{"version":3,"sources":["components/Controls/style.module.css","components/Balance/style.module.css","components/TransactionHistory/style.module.css","components/Controls/index.jsx","components/Balance/index.jsx","components/TransactionHistory/index.jsx","components/Dashboard/index.jsx","components/App/index.jsx","index.js"],"names":["module","exports","Controls","onDeposit","onWithdraw","state","amount","balance","showMsg","msg","toast","error","handleQuery","target","name","replace","parentNode","querySelector","value","className","css","controls","type","placeholder","onChange","onClick","defaultProps","Balance","income","expences","TransactionHistory","rows","items","map","el","key","id","date","Dashboard","transactions","newTransaction","setState","prevState","success","Date","transaction","shortid","generate","toLocaleString","calc","transactionType","filter","reduce","acc","savedTransactionList","localStorage","getItem","savedBalance","this","JSON","parse","setItem","stringify","dashboard","position","autoClose","Component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aab21839.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"style_controls__b5iHy\",\"toast\":\"style_toast__209uI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"balance\":\"style_balance__GF34I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TransactionHistory\":\"style_TransactionHistory__2pH9W\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport css from './style.module.css';\r\n\r\nconst Controls = ({ onDeposit, onWithdraw, balance }) => {\r\n  \r\n  const state = {\r\n      amount: 0,\r\n      balance: balance,\r\n  }\r\n\r\n  const showMsg = (msg) => toast.error(msg);\r\n  \r\n  const handleQuery = ({ target }) => {\r\n    const { amount } = state;\r\n    if (!amount || amount <= 0) return showMsg('Введите сумму для проведения операции!');\r\n    if (target.name === \"withdraw\") {\r\n      if (state.balance < amount) return showMsg(\"На счету недостаточно средств для проведения операции!\");\r\n      onWithdraw(+amount.replace(/^0+/, ''));\r\n    }\r\n    if (target.name === \"deposit\") onDeposit(+amount.replace(/^0+/, ''));\r\n    target.parentNode.querySelector('[name=\"amount\"]').value = '';\r\n  };\r\n\r\n\r\n  const handleSetAmount = ({target}) => {\r\n    state[target.name] = target.value;\r\n  };\r\n\r\n  return(\r\n    <section className={css.controls}>\r\n      <input type=\"number\" placeholder=\"Введите сумму\" name=\"amount\" onChange={handleSetAmount}/>\r\n      <button type=\"button\" name=\"deposit\" onClick={handleQuery}>Deposit</button>\r\n      <button type=\"button\" name='withdraw' onClick={handleQuery}>Withdraw</button>\r\n    </section>\r\n  )  \r\n}\r\n\r\nControls.propTypes = {\r\n  onDeposit: PropTypes.func,\r\n  onWithdrow: PropTypes.func,\r\n  balance: PropTypes.number,\r\n}\r\n\r\nControls.defaultProps = {\r\n  balance: 0,\r\n}\r\n\r\nexport default Controls;","import React from 'react';\r\nimport css from './style.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Balance = ({ balance, income, expences}) => { \r\n  return (\r\n    <section className={css.balance}>\r\n      <span>⬆{income}$</span>\r\n      <span>⬇{expences}$</span>\r\n      <span>Balance: {balance}$</span>\r\n    </section>\r\n\r\n  )\r\n}\r\n\r\nBalance.propTypes = {\r\n  balance: PropTypes.number,\r\n  expences: PropTypes.number,\r\n  income: PropTypes.number,\r\n};\r\n\r\nBalance.defaultProps = {\r\n  balance: 0,\r\n  expences: 0,\r\n  income: 0,\r\n}\r\n\r\nexport default Balance;","import React from 'react';\r\nimport css from './style.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst TransactionHistory = ({ items }) => {\r\n  const rows = items.map(el => \r\n    <tr key={el.id}>\r\n      <td>{el.type}</td>\r\n      <td>{el.amount}$</td>\r\n      <td>{el.date}</td>\r\n    </tr>\r\n  )\r\n  return (\r\n    <table className={css.TransactionHistory}>\r\n      <thead>\r\n        <tr>\r\n          <th>Type</th>\r\n          <th>Amount</th>\r\n          <th>Currency</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {rows}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nTransactionHistory.propTypes = {\r\n  items: PropTypes.array,\r\n};\r\n\r\nTransactionHistory.defaultProps = {\r\n  items: [],\r\n}\r\n\r\nexport default TransactionHistory;\r\n\r\n","import React, { Component } from 'react';\nimport shortid from 'shortid';\n\nimport Controls from '../Controls';\nimport Balance from '../Balance';\nimport TransactionHistory from '../TransactionHistory';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport css from './style.module.css';\n\nclass Dashboard extends Component {\n\n  state = {\n    transactions: [],\n    balance: 0,\n  }\n\n  componentDidMount() {\n    const savedTransactionList = localStorage.getItem('transactions'),\n      savedBalance = localStorage.getItem('balance');\n\n    if (savedTransactionList && savedBalance) {\n      this.setState({\n        transactions: JSON.parse(savedTransactionList),\n        balance: +savedBalance\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    const { transactions, balance } = this.state;\n    localStorage.setItem('transactions', JSON.stringify(transactions));\n    localStorage.setItem('balance', balance);\n  }\n  \n  onDeposit = (amount) => {\n    this.newTransaction(amount, 'deposit');\n    this.setState(prevState => ({ balance: prevState.balance + +amount }));\n    toast.success(\"Операция успешна!\");\n  }\n\n  onWithdraw = (amount) => {\n    this.newTransaction(amount, 'withdrawal');\n    this.setState(prevState => ({ balance: prevState.balance - +amount }));\n    toast.success(\"Операция успешна!\");\n  }\n\n  newTransaction = (amount, type) => {\n    const date = new Date();\n\n    const transaction = {\n      id: shortid.generate(),\n      type: type,\n      amount: amount,\n      date: date.toLocaleString(),\n    }\n\n    this.setState(prevState => ({ transactions: [...prevState.transactions, transaction] }));\n  }\n\n  calc = (transactionType) => {\n    const filteredArr = this.state.transactions.filter(el => el.type === transactionType),\n      sum = filteredArr.reduce((acc, el) => acc + +el.amount, 0);\n    return sum;\n  }\n\n  render() {\n\n    const { balance, transactions } = this.state;\n    \n    return (\n      <div className={css.dashboard}>\n        <Controls onDeposit={this.onDeposit} onWithdraw={this.onWithdraw} balance={balance} />\n        <Balance balance={balance} income={this.calc(\"deposit\")} expences={this.calc(\"withdrawal\")}/>\n        <TransactionHistory items={transactions} />\n        <ToastContainer\n          position=\"bottom-right\"\n          autoClose={3000}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n","import React from 'react';\r\nimport Dashboard from '../Dashboard';\r\n\r\nconst App = () => {\r\n\r\n    return (\r\n      <Dashboard/>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './style.css'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}